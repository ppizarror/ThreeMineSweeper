THREE.OrbitControls=function(d,x){function y(b){if(!1!==a.enabled){b.preventDefault();a.domElement.focus?a.domElement.focus():window.focus();switch(b.button){case a.mouseButtons.LEFT:if(b.ctrlKey||b.metaKey){if(!1===a.enablePan)return;h.set(b.clientX,b.clientY);g=f.PAN}else{if(!1===a.enableRotate)return;m.set(b.clientX,b.clientY);g=f.ROTATE}break;case a.mouseButtons.MIDDLE:if(!1===a.enableZoom)return;k.set(b.clientX,b.clientY);g=f.DOLLY;break;case a.mouseButtons.RIGHT:if(!1===a.enablePan)return;h.set(b.clientX,
b.clientY);g=f.PAN}g!==f.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",A,!1),a.dispatchEvent(B))}}function z(b){if(!1!==a.enabled)switch(b.preventDefault(),g){case f.ROTATE:if(!1===a.enableRotate)break;a.viewerCamera.movements.rotate&&(l.set(b.clientX,b.clientY),q.subVectors(l,m).multiplyScalar(a.rotatespeed),b=a.domElement===document?a.domElement.body:a.domElement,c.theta-=2*Math.PI*q.x/b.clientHeight,c.phi-=2*Math.PI*q.y/b.clientHeight,m.copy(l),a.update());
break;case f.DOLLY:if(!1===a.enableZoom)break;r.set(b.clientX,b.clientY);t.subVectors(r,k);0<t.y?(b=Math.pow(.95,a.zoomSpeed),a.object.isPerspectiveCamera?n/=b:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*b)),a.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)):0>t.y&&(b=Math.pow(.95,a.zoomSpeed),a.object.isPerspectiveCamera?n*=b:a.object.isOrthographicCamera?
(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/b)),a.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1));k.copy(r);a.update();break;case f.PAN:!1!==a.enablePan&&(u.set(b.clientX,b.clientY),v.subVectors(u,h).multiplyScalar(a.panSpeed),a.panFunction(v.x,v.y),h.copy(u),a.update())}}function A(b){!1!==a.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",
A,!1),a.dispatchEvent(C),g=f.NONE)}this.object=d;this.domElement=void 0!==x?x:document;this.enabled=!0;this.viewerCamera=null;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.zoomFunction=function(a){};this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=
!0;this.panFunction=function(a,c){};this.panSpeed=1;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return e.phi};this.getAzimuthalAngle=function(){return e.theta};this.saveState=function(){a.target0.copy(a.target);a.position0.copy(a.object.position);
a.zoom0=a.object.zoom};this.reset=function(){a.target.copy(a.target0);a.object.position.copy(a.position0);a.object.zoom=a.zoom0;a.object.updateProjectionMatrix();a.dispatchEvent(D);a.update();g=f.NONE};this.update=function(){var b=new THREE.Vector3,h=(new THREE.Quaternion).setFromUnitVectors(d.up,new THREE.Vector3(0,1,0)),m=h.clone().inverse(),k=new THREE.Vector3,l=new THREE.Quaternion;return function(){var d=a.object.position;b.copy(d).sub(a.target);b.applyQuaternion(h);e.setFromVector3(b);a.autoRotate&&
g===f.NONE&&(c.theta-=2*Math.PI/60/60*a.autoRotateSpeed);e.theta+=c.theta;e.phi+=c.phi;e.theta=Math.max(a.minAzimuthAngle,Math.min(a.maxAzimuthAngle,e.theta));e.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,e.phi));e.makeSafe();e.radius*=n;e.radius=Math.max(a.minDistance,Math.min(a.maxDistance,e.radius));a.target.add(w);b.setFromSpherical(e);b.applyQuaternion(m);d.copy(a.target).add(b);a.object.lookAt(a.target);!0===a.enableDamping?(c.theta*=1-a.dampingFactor,c.phi*=1-a.dampingFactor,w.multiplyScalar(1-
a.dampingFactor)):(c.set(0,0,0),w.set(0,0,0));n=1;return p||k.distanceToSquared(a.object.position)>E||8*(1-l.dot(a.object.quaternion))>E?(a.dispatchEvent(D),k.copy(a.object.position),l.copy(a.object.quaternion),p=!1,!0):!1}}();this.dispose=function(){a.domElement.removeEventListener("mousedown",y,!1)};var a=this,D={type:"change"},B={type:"start"},C={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},g=f.NONE,E=.000001,e=new THREE.Spherical,c=new THREE.Spherical,n=1,w=
new THREE.Vector3,p=!1,m=new THREE.Vector2,l=new THREE.Vector2,q=new THREE.Vector2,h=new THREE.Vector2,u=new THREE.Vector2,v=new THREE.Vector2,k=new THREE.Vector2,r=new THREE.Vector2,t=new THREE.Vector2;this.rotateLeft=function(a){c.theta-=a};this.rotateUp=function(a){c.phi-=a};a.domElement.addEventListener("mousedown",y,!1);a.domElement.addEventListener("wheel",function(b){!1===a.enabled||!1===a.enableZoom||g!==f.NONE&&g!==f.ROTATE||(b.preventDefault(),b.stopPropagation(),a.dispatchEvent(B),a.zoomFunction(b.deltaY),
a.update(),a.dispatchEvent(C))},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;
Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(d){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!d}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
return!this.enableRotate},set:function(d){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!d}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(d){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!d}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");
return!this.enableKeys},set:function(d){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!d}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(d){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!d}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");
return this.dampingFactor},set:function(d){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=d}}});
