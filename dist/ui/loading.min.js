/*
 MIT
*/
function FullPageLoadingSpinner(){this._loading_spiner=null;this._enabled=!1;this._maxDurationSpinner=cfg_max_time_loading_layer;this._maxDurationThread=0;this._threadChange=-1;var a=this;this.start=function(){-1!==a._threadChange||a._enabled||(a._threadChange=setTimeout(function(){a._enabled||a._load_fullpage_spinner(!0);a._threadChange=-1},cfg_init_loading_layer_after))};this.stop=function(){-1!==a._threadChange&&(clearTimeout(a._threadChange),a._threadChange=-1);a._load_fullpage_spinner(!1)};this._load_fullpage_spinner=
function(b,d){var e=get_element_height(app_dom.window);var c=get_element_height(app_dom.body);c=Math.max(e,c)-.1;var f=(get_element_width(app_dom.window)-69)/2;e=(e-69)/2;b?(is_null_undf(document.getElementById("LoadingDivLayer"))&&(app_console.info(lang.building_full_loading_layer),app_dom.body.prepend('<div id="LoadingDivLayer" class="LoadingDivLayerClass noselect"><div class="LoadingForeground"><div class="LoadingBox"><div id="spinnerSpin"></div></div></div><div class="LoadingBackground"></div></div>'),
b={animation:"spinner-line-fade-more",className:"spinner",color:theme.spinColor,corners:.95,direction:1,fadeColor:"transparet",left:"50%",length:35,lines:theme.spinLines,position:"absolute",radius:45,rotate:0,scale:theme.spinScale,shadow:theme.spinShadow,speed:1,top:"50%",width:16,zIndex:2E9},this._spinnerContainer=document.getElementById("spinnerSpin"),a._loading_spiner=new Spinner(b)),b=$("#LoadingDivLayer"),b.css("height",String(c)+"px"),b.find(".LoadingForeground").css("height",String(c)+"px"),
b.find(".LoadingForeground .LoadingBox").css({top:String(e)+"px",left:String(f)+"px"}),b.find(".LoadingBackground").css("height",String(c)+"px"),b.fadeIn(350,function(){not_null_undf(d)&&d()}),a._loading_spiner.spin(a._spinnerContainer),app_dom.body.height()>app_dom.window.height()&&$.extScrollLock.enable("loading"),0<a._maxDurationSpinner&&(a._maxDurationThread=setTimeout(function(){a.stop();a._maxDurationThread=0;clearTimeout(a._threadChange);a._threadChange=-1},1E3*a._maxDurationSpinner)),a._enabled=
!0):(0!==a._maxDurationThread&&(clearTimeout(a._maxDurationThread),a._maxDurationThread=0),$("#LoadingDivLayer").hide(),not_null_undf(this._loading_spiner)&&a._loading_spiner.stop(),a._enabled=!1,not_null_undf(d)&&d())};app_dom.window.on("resize.FullPageLoadingDivLayer",function(b){b.preventDefault();if(a._enabled&&null!==document.getElementById("LoadingDivLayer")){var d=get_element_height(app_dom.window);b=get_element_height(app_dom.body);b=Math.max(d,b);var e=get_element_width(app_dom.window);e=
(e-69)/2;d=(d-69)/2;var c=$("#LoadingDivLayer");c.css({height:String(b)+"px"});c.find("> .LoadingForeground").css({height:String(b)+"px"});c.find("> .LoadingBackground").css({height:String(b)+"px"});c.find("> .LoadingForeground > .LoadingBox").css({left:String(e)+"px"});$(".LoadingBox").css({left:e+"px",top:d+"px"})}})}var _app_loading_layer=new FullPageLoadingSpinner;function loadingHandler(a){a?_app_loading_layer.start():_app_loading_layer.stop();return!0};
