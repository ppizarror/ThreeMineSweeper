/*
 MIT
*/
function GenMobius(){Generator.call(this);this._genprops.latlng=!0;this._set_name("Moebius");this._generate=function(f,c,g,w,d,b){this._set_camera_position(0,0,2);var h=this._lat+1,p=this._lng+1,x=Math.abs(w-f),y=Math.abs(d-c),n=Math.abs(b-g),q=Math.min(x,y)/2;f=(f+w)/2;c=(c+d)/2;b=(g+b)/2;d=2*Math.PI/(p-1);w=2*q/(h-1);g=[];var z=Number.NEGATIVE_INFINITY;var D=Number.POSITIVE_INFINITY;var A=Number.NEGATIVE_INFINITY;var E=Number.POSITIVE_INFINITY;var B=Number.NEGATIVE_INFINITY;var F=Number.POSITIVE_INFINITY,
k=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;var C=Number.NEGATIVE_INFINITY;for(var v=Number.POSITIVE_INFINITY,G=0;G<p;G+=1){var e=G*d;for(var H=0;H<h;H+=1){var a=-q+w*H;var l=f+(1+a/2*Math.cos(e/2))*Math.cos(e);var m=c+(1+a/2*Math.cos(e/2))*Math.sin(e);a=b+a/2*Math.sin(e/2);l>=f?(z=Math.max(z,l),D=Math.min(D,l)):(k=Math.max(k,l),r=Math.min(r,l));m>=c?(A=Math.max(A,m),E=Math.min(E,m)):(t=Math.max(t,m),u=Math.min(u,m));a>=b?(B=Math.max(B,
a),F=Math.min(F,a)):(C=Math.max(C,a),v=Math.min(v,a))}}z=Math.min(1,x/(2*Math.abs(z-D)));A=Math.min(1,y/(2*Math.abs(A-E)));B=Math.min(1,n/(2*Math.abs(B-F)));x=Math.min(1,x/(2*Math.abs(k-r)));y=Math.min(1,y/(2*Math.abs(t-u)));C=Math.min(1,n/(2*Math.abs(C-v)));for(n=0;n<p;n+=1)for(e=n*d,k=0;k<h;k+=1)a=-q+w*k,l=(1+a/2*Math.cos(e/2))*Math.cos(e),m=(1+a/2*Math.cos(e/2))*Math.sin(e),a=a/2*Math.sin(e/2),v=l>=f?z:x,t=m>=c?A:y,u=a>=b?B:C,l*=v,m*=t,a*=u,g.push(new Vertex(f+l,c+m,b+a,"Vs"+(n*p+k).toString()));
n=g.length;for(k=0;k<p;k+=1)for(e=k*d,r=0;r<h;r+=1)a=-q+w*r,l=(1+a/2*Math.cos(e/2))*Math.cos(e),m=(1+a/2*Math.cos(e/2))*Math.sin(e),a=a/2*Math.sin(e/2)-.005*(0===k?0:1),v=l>=f?z:x,t=m>=c?A:y,u=a>=b?B:C,l*=v,m*=t,a*=u,g.push(new Vertex(f+l,c+m,b+a,"Vi"+(k*p+r).toString()));q=[];f=1;for(b=0;b<p-1;b+=1)for(d=0;d<h-1;d+=1)c=new Face([g[h*b+d],g[h*b+d+1],g[h*(b+1)+d+1],g[h*(b+1)+d]],"F"+f.toString()),c.enable_uv_flip(),c.set_uv_rotation(-90),c.set_bomb_behaviour(c.behaviour.AROUND),q.push(c),f+=1;for(b=
0;b<p-1;b+=1)for(d=0;d<h-1;d+=1)c=new Face([g[n+h*b+d],g[n+h*b+d+1],g[n+h*(b+1)+d+1],g[n+h*(b+1)+d]],"F"+f.toString()),c.reverse_vertices(),c.set_uv_rotation(-90),c.set_bomb_behaviour(c.behaviour.AROUND),q.push(c),f+=1;this._volume.add_face(q)}};
