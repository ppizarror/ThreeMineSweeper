/*
 MIT
*/
function GenMobius(){Generator.call(this);this._genprops.latlng=!0;this._set_name("Moebius");this._generate=function(f,c,g,v,d,b){this._set_camera_position(0,0,2);var h=this._lat+1,p=this._lng+1,m=Math.abs(v-f),t=Math.abs(d-c),w=Math.abs(b-g),q=Math.min(m,t)/2;f=(f+v)/2;c=(c+d)/2;b=(g+b)/2;d=2*Math.PI/(p-1);v=2*q/(h-1);g=[];for(var k,l,a,n,D=function(a,b){return(1+b/2*Math.cos(a/2))*Math.cos(a)},E=function(a,b){return(1+b/2*Math.cos(a/2))*Math.sin(a)},x=1,y=1,z=1,u=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,
r=Number.NEGATIVE_INFINITY,F=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,H=Number.POSITIVE_INFINITY,A=1,B=1,C=1,I=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY,K=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,O=0;O<p;O+=1){n=O*d;for(var P=0;P<h;P+=1)a=-q+v*P,k=f+D(n,a),l=c+E(n,a),a=b+a/2*Math.sin(n/2),k>=f?(u=Math.max(u,k),e=Math.min(e,k)):(I=Math.max(I,k),J=Math.min(J,k)),l>=c?(r=Math.max(r,l),F=Math.min(F,l)):(K=Math.max(K,
l),L=Math.min(L,l)),a>=b?(G=Math.max(G,a),H=Math.min(H,a)):(M=Math.max(M,a),N=Math.min(N,a))}x=Math.min(x,m/(2*Math.abs(u-e)));y=Math.min(y,t/(2*Math.abs(r-F)));z=Math.min(z,w/(2*Math.abs(G-H)));A=Math.min(A,m/(2*Math.abs(I-J)));B=Math.min(B,t/(2*Math.abs(K-L)));C=Math.min(C,w/(2*Math.abs(M-N)));for(m=0;m<p;m+=1)for(n=m*d,e=0;e<h;e+=1)a=-q+v*e,k=D(n,a),l=E(n,a),a=a/2*Math.sin(n/2),t=k>=f?x:A,w=l>=c?y:B,u=a>=b?z:C,k*=t,l*=w,a*=u,g.push(new Vertex(f+k,c+l,b+a,"Vs"+(m*p+e).toString()));m=g.length;for(e=
0;e<p;e+=1)for(n=e*d,r=0;r<h;r+=1)a=-q+v*r,k=D(n,a),l=E(n,a),a=a/2*Math.sin(n/2)-.005*(0===e||e===p-1?0:1),t=k>=f?x:A,w=l>=c?y:B,u=a>=b?z:C,k*=t,l*=w,a*=u,g.push(new Vertex(f+k,c+l,b+a,"Vi"+(e*p+r).toString()));q=[];f=1;for(b=0;b<p-1;b+=1)for(d=0;d<h-1;d+=1)c=new Face([g[h*b+d],g[h*b+d+1],g[h*(b+1)+d+1],g[h*(b+1)+d]],"Fs"+f.toString()),c.enable_uv_flip(),c.set_uv_rotation(-90),c.set_bomb_behaviour(c.behaviour.AROUND),q.push(c),f+=1;for(b=0;b<p-1;b+=1)for(d=0;d<h-1;d+=1)c=new Face([g[m+h*b+d],g[m+
h*b+d+1],g[m+h*(b+1)+d+1],g[m+h*(b+1)+d]],"Fi"+f.toString()),c.reverse_vertices(),c.set_uv_rotation(-90),c.set_bomb_behaviour(c.behaviour.AROUND),q.push(c),f+=1;this._volume.add_face(q)}};
